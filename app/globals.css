:root {
  --bg: #fff;
  --fg: #000;

  /* Frame position within the 5000x5000 image (as percentages) */
  --frame-top: 27.5%;
  --frame-left: 27.5%;
  --frame-width: 29%;
  --frame-height: 40%;

  /* Green button position */
  --btn-top: 37%;
  --btn-left: 69.5%;
  --btn-size: 4%;

  /* Button styling */
  --btn-pad-y: 12px;
  --btn-pad-x: 24px;
  --btn-font: clamp(14px, 1.8vw, 18px);
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: var(--bg);
  color: var(--fg);
  overflow: hidden;
  overscroll-behavior: none;
  touch-action: manipulation;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

* {
  box-sizing: border-box;
  font-weight: 700;
}

/* Main app container */
.booth {
  height: 100vh;
  width: 100vw;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* =========================================================
   Scene wrapper - maintains 1:1 aspect ratio like the images
   ========================================================= */
.scene-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  max-width: 100vmin;
  max-height: 100vmin;
  aspect-ratio: 1 / 1;
}

/* Scene background images */
.scene-bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  z-index: 10;
  pointer-events: none;
}

/* =========================================================
   Mirror area - positioned within the scene wrapper
   Coordinates match the transparent frame in the image
   ========================================================= */
.mirror-area {
  position: absolute;
  z-index: 20;
  top: var(--frame-top);
  left: var(--frame-left);
  width: var(--frame-width);
  height: var(--frame-height);
  overflow: hidden;
  /* White border around the video - doesn't shrink video */
  border: 15px solid #fff;
  box-sizing: content-box;
}

.mirror-area.hidden {
  opacity: 0;
  pointer-events: none;
}

.mirror-area.visible {
  opacity: 1;}

.mirror-video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: grayscale(100%) contrast(1.15);
  transform: scaleX(-1);
}

/* =========================================================
   OUTSIDE SCENE - Booth exterior
   ========================================================= */
.enter-area {
  position: absolute;
  z-index: 50;
  top: 65%;
  left: 67%;
  transform: translateX(-50%);
  width: 18%;
  height: 35%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.enter-text {
  font-size: clamp(16px, 3vw, 32px);
  font-weight: 900;
  letter-spacing: 0.15em;
  color: #000;
  background: rgba(255, 255, 255, 0.9);
  padding: 12px 24px;
  border: 3px solid #000;
  border-radius: 8px;
  transition: transform 0.1s ease;
}

.enter-area:hover .enter-text {
  transform: scale(1.05);
}

.enter-area:active .enter-text {
  transform: scale(0.98);
}

/* =========================================================
   INSIDE SCENE - Camera capture
   ========================================================= */

/* Photo counter (1/4, 2/4, etc.) */
.photo-counter {
  position: absolute;
  z-index: 50;
  bottom: 5%;
  left: 50%;
  transform: translateX(-50%);
  font-size: clamp(14px, 2.5vw, 20px);
  font-weight: 700;
  color: #fff;
  background: rgba(0, 0, 0, 0.7);
  padding: 6px 14px;
  border-radius: 6px;
}

/* Countdown overlay - large number */
.countdown-overlay {
  position: absolute;
  z-index: 50;
  top: 62%;
  left: 45%;
  transform: translate(-50%, -50%);
  font-size: clamp(10px, 12vmin, 150px);
  font-weight: 900;
  color: #fff;
  text-shadow:
    -4px -4px 0 #000,
    4px -4px 0 #000,
    -4px 4px 0 #000,
    4px 4px 0 #000;
  animation: countPulse 1s ease-in-out infinite;
}

@keyframes countPulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.1); }
}

/* Green button clickable area */
.green-button-area {
  position: absolute;
  z-index: 50;
  top: var(--btn-top);
  left: var(--btn-left);
  width: var(--btn-size);
  height: var(--btn-size);
  cursor: pointer;
  border-radius: 50%;
  transition: transform 0.1s ease;
  /* Debug: remove this line when positioning is correct */
  /* background: rgba(0, 255, 0, 0.3); */
}

.green-button-area:hover {
  transform: scale(1.15);
}

.green-button-area:active {
  transform: scale(0.95);
}

/* Flash effect overlay */
.flash-overlay {
  position: fixed;
  inset: 0;
  background: #fff;
  z-index: 200;
  animation: flashAnim 0.3s ease-out forwards;
}

@keyframes flashAnim {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

/* =========================================================
   Coin animation - hand inserting motion (arch)
   ========================================================= */
.coin {
  position: absolute;
  z-index: 100;
  width: 4%;
  aspect-ratio: 1;
  /* Black and white style */
  border-radius: 50%;
  border: 2px solid #000;
  
  /* Start position - to the right, will arc into slot */
  animation: coinInsert 1s ease-out forwards;
}

.coin::before {
  content: "";
  position: absolute;
  inset: 20%;
  border-radius: 50%;
}

@keyframes coinInsert {
  0% {
    /* Start from bottom-right, like a hand approaching */
    top: 62%;
    left: 85%;
    transform: rotate(-30deg) scale(1);
    opacity: 1;
  }
  30% {
    /* Arc upward */
    top: 42%;
    left: 74%;
    transform: rotate(0deg) scale(1);
    opacity: 1;
  }
  60% {
    /* Peak of the arc, tilting toward slot */
    top: 40%;
    left: 71%;
    transform: rotate(15deg) scale(1);
    opacity: 1;
  }
  85% {
    /* Moving into the slot */
    top: 48%;
    left: 70%;
    transform: rotate(90deg) scale(0.8);
    opacity: 1;
  }
  100% {
    /* Inserted into slot */
    top: 52%;
    left: 70%;
    transform: rotate(90deg) scale(0.4);
    opacity: 0;
  }
}

/* =========================================================
   ARRIVING SCENE - Photo printing
   ========================================================= */
.arriving-countdown {
  position: absolute;
  z-index: 50;
  top: 8%;
  left: 50%;
  transform: translateX(-50%);
  font-size: clamp(40px, 8vmin, 80px);
  font-weight: 900;
  color: #000;
}

/* =========================================================
   RESULT SCENE - Photo strip display
   ========================================================= */
.result-scene {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  padding: 20px;
  background: #fff;
}

.strip-drop {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
}

.strip-drop img {
  max-height: 70vh;
  max-width: 90vw;
  width: auto;
  height: auto;
  border: 3px solid #000;
  animation: stripDrop 1.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

@keyframes stripDrop {
  0% {
    transform: translateY(-100%);
    opacity: 0;
  }
  60% {
    transform: translateY(5%);
    opacity: 1;
  }
  100% {
    transform: translateY(0);
  }
}

/* Control buttons */
.controls {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
}

.controls a {
  text-decoration: none;
}

button {
  background: #fff;
  border: 2px solid #000;
  color: #000;
  padding: var(--btn-pad-y) var(--btn-pad-x);
  font-size: var(--btn-font);
  font-weight: 700;
  letter-spacing: 0.08em;
  cursor: pointer;
  border-radius: 8px;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  transition: all 0.1s ease;
}

button:hover {
  background: #000;
  color: #fff;
}

button:active {
  transform: translateY(2px);
}

/* =========================================================
   Review popup
   ========================================================= */
.review-overlay {
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
}

.review-modal {
  background: #fff;
  border: 3px solid #000;
  border-radius: 18px;
  padding: 32px 28px;
  width: min(90vw, 360px);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  text-align: center;
}

.review-modal a,
.review-modal button {
  width: 100%;
  max-width: 180px;
}

.review-stars {
  font-size: 32px;
  letter-spacing: 0.1em;
}

.review-modal p {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
}

.review-modal button.secondary {
  background: transparent;
  border-color: rgba(0, 0, 0, 0.3);
}

.review-modal button.secondary:hover {
  background: rgba(0, 0, 0, 0.05);
  color: #000;
}

/* =========================================================
   Print styles
   ========================================================= */
@media print {
  @page {
    size: auto;
    margin: 0;
  }

  html,
  body {
    margin: 0;
    padding: 0;
    background: #fff;
    height: 100%;
    overflow: hidden;
  }

  body * {
    visibility: hidden !important;
  }

  .print-area,
  .print-area * {
    visibility: visible !important;
  }

  .print-area {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
  }

  .print-area img {
    max-height: 100vh;
    width: auto;
    height: auto;
    object-fit: contain;
    border-radius: 0;
    display: block;
  }
}

/* =========================================================
   Footer links
   ========================================================= */
.footer-links {
  position: fixed;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  z-index: 60;
}

.footer-links a {
  color: #bcbcbc;
  text-decoration: underline;
}

/* =========================================================
   Responsive adjustments
   ========================================================= */
@media (max-width: 600px) {
  .enter-area {
    top: 65%;
    left: 67%;
  }

  .enter-text {
    font-size: 12px;
    padding: 8px 14px;
    border-width: 2px;
  }

  :root {
    --btn-top: 36%;
    --btn-left: 68%;
    --btn-size: 6%;
  }

  .mirror-area.visible {
    top: 27%;
    left: 27%;

      border: 7px solid #fff;
  box-sizing: content-box;
  }

}
